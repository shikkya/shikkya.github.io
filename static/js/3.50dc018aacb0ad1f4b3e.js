webpackJsonp([3],{"7w/L":function(t,i,e){var a={"./state_1.png":"2PFs","./state_2.png":"owMS","./state_3.png":"lm+a"};function s(t){return e(r(t))}function r(t){var i=a[t];if(!(i+1))throw new Error("Cannot find module '"+t+"'.");return i}s.keys=function(){return Object.keys(a)},s.resolve=r,t.exports=s,s.id="7w/L"},VQsL:function(t,i,e){var a={"./num_1.png":"MuA+","./num_2.png":"61G7","./num_3.png":"THBt","./num_4.png":"UCMZ","./num_5.png":"EXTA","./num_6.png":"uokF","./num_7.png":"ZBaz","./num_8.png":"IEP/"};function s(t){return e(r(t))}function r(t){var i=a[t];if(!(i+1))throw new Error("Cannot find module '"+t+"'.");return i}s.keys=function(){return Object.keys(a)},s.resolve=r,t.exports=s,s.id="VQsL"},dfbM:function(t,i){},tFDF:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={data:function(){return{gameState:0,optionIndex:0,levelIndex:0,levelArr:[{name:"初级",mapWid:9,mapHei:9,bombNum:10},{name:"中级",mapWid:16,mapHei:16,bombNum:40},{name:"高级",mapWid:30,mapHei:16,bombNum:99}],mapWid:0,mapHei:0,bombNum:0,arrMap:[],arrGame:[],stepCount:0,flagCount:0,time:0,timer:null,dialogOption:!1,dialogRule:!1}},watch:{gameState:function(t){var i=this;0==t?(this.time=0,clearInterval(this.timer)):1==t?this.timer=setInterval(function(){i.time++},1e3):t>1&&clearInterval(this.timer)}},created:function(){this.initSetVal(),this.initGame()},mounted:function(){this.initHeaderTit("minesweeper"),document.oncontextmenu=function(){return!1}},methods:{initHeaderTit:function(t){for(var i=this.$store.state.game,e=0;e<i.length;e++)if(i[e].router==t){this.$emit("getTitVal",i[e].tit);break}},initSetVal:function(){this.mapWid=this.levelArr[this.levelIndex].mapWid,this.mapHei=this.levelArr[this.levelIndex].mapHei,this.bombNum=this.levelArr[this.levelIndex].bombNum},initGame:function(){this.gameState=0,this.stepCount=0,this.flagCount=0,this.time=0,this.initArr(),this.initBomb()},initArr:function(){this.arrMap=[],this.arrGame=[];for(var t=0;t<this.mapHei;t++){this.arrMap.push([]),this.arrGame.push([]);for(var i=0;i<this.mapWid;i++)this.arrMap[t].push(0),this.arrGame[t].push(-2)}},initBomb:function(){for(var t=0,i=0,e=0;t<this.bombNum;)i=this.randomNum(0,this.mapHei),e=this.randomNum(0,this.mapWid),-1!=this.arrMap[i][e]&&(this.arrMap[i][e]=-1,this.calcNum(i,e),t++)},calcNum:function(t,i){t>0&&i>0&&-1!=this.arrMap[t-1][i-1]&&this.arrMap[t-1][i-1]++,t>0&&-1!=this.arrMap[t-1][i]&&this.arrMap[t-1][i]++,t>0&&i<this.mapWid-1&&-1!=this.arrMap[t-1][i+1]&&this.arrMap[t-1][i+1]++,i>0&&-1!=this.arrMap[t][i-1]&&this.arrMap[t][i-1]++,i<this.mapWid-1&&-1!=this.arrMap[t][i+1]&&this.arrMap[t][i+1]++,t<this.mapHei-1&&i>0&&-1!=this.arrMap[t+1][i-1]&&this.arrMap[t+1][i-1]++,t<this.mapHei-1&&-1!=this.arrMap[t+1][i]&&this.arrMap[t+1][i]++,t<this.mapHei-1&&i<this.mapWid-1&&-1!=this.arrMap[t+1][i+1]&&this.arrMap[t+1][i+1]++},randomNum:function(t,i){return Math.floor(Math.random()*(t-i)+i)},handleLeft:function(t,i){return(-2==this.arrGame[t][i]||-4==this.arrGame[t][i])&&(this.gameState=1,this.arrMap[t][i]>0?(this.$set(this.arrGame[t],i,this.arrMap[t][i]),this.stepCount++,this.checkIsEnd(),!1):-1==this.arrMap[t][i]?(this.$set(this.arrGame[t],i,-5),this.$message({message:"游戏失败~",type:"error",center:!0}),this.gameEnd(),this.gameState=3,!1):void(0==this.arrMap[t][i]&&(this.clickNone(t,i),this.checkIsEnd())))},handleRight:function(t,i){return-2==this.arrGame[t][i]?(this.$set(this.arrGame[t],i,-3),this.stepCount++,this.flagCount++,this.checkIsEnd(),!1):-3==this.arrGame[t][i]?(this.$set(this.arrGame[t],i,-4),this.stepCount--,this.flagCount--,!1):void(-4==this.arrGame[t][i]&&this.$set(this.arrGame[t],i,-2))},clickNone:function(t,i){this.$set(this.arrGame[t],i,0),this.stepCount++,t>0&&i>0&&this.setNone(t-1,i-1),t>0&&this.setNone(t-1,i),t>0&&i<this.mapWid-1&&this.setNone(t-1,i+1),i>0&&this.setNone(t,i-1),i<this.mapWid-1&&this.setNone(t,i+1),t<this.mapHei-1&&i>0&&this.setNone(t+1,i-1),t<this.mapHei-1&&this.setNone(t+1,i),t<this.mapHei-1&&i<this.mapWid-1&&this.setNone(t+1,i+1)},setNone:function(t,i){return(-2==this.arrGame[t][i]||-4==this.arrGame[t][i])&&(this.arrMap[t][i]>0?(this.$set(this.arrGame[t],i,this.arrMap[t][i]),this.stepCount++,!1):void(0==this.arrMap[t][i]&&this.clickNone(t,i)))},checkIsEnd:function(){this.stepCount==this.mapWid*this.mapHei&&this.flagCount==this.bombNum&&(this.$message({message:"恭喜胜利~",type:"success",center:!0}),this.gameEnd(),this.gameState=2)},gameEnd:function(){for(var t=0;t<this.mapHei;t++)for(var i=0;i<this.mapWid;i++)this.arrMap[t][i]!=this.arrGame[t][i]&&(-3==this.arrGame[t][i]&&-1==this.arrMap[t][i]?this.$set(this.arrGame[t],i,-6):-3==this.arrGame[t][i]&&-1!=this.arrMap[t][i]?this.$set(this.arrGame[t],i,-7):-2==this.arrGame[t][i]&&-1==this.arrMap[t][i]?this.$set(this.arrGame[t],i,-1):-2!=this.arrGame[t][i]&&-4!=this.arrGame[t][i]||this.$set(this.arrGame[t],i,this.arrMap[t][i]))},restartGame:function(){var t=this;if(1!=this.gameState)return this.initGame(),!1;this.$confirm("进行中的游戏无法保存, 是否开始新的一局?","提示",{confirmButtonText:"重新开始",cancelButtonText:"取消",type:"warning"}).then(function(){t.initGame()}).catch(function(){})},setOption:function(){var t=this;if(this.dialogOption=!1,1!=this.gameState)return this.levelIndex=this.optionIndex,this.initSetVal(),this.initGame(),!1;this.$confirm("更改设置后无法保存当前游戏，是否开始新的一局?","提示",{confirmButtonText:"重新开始",cancelButtonText:"取消",type:"warning"}).then(function(){t.levelIndex=t.optionIndex,t.initSetVal(),t.initGame()}).catch(function(){t.optionIndex=t.levelIndex})},closeDialogOption:function(){this.dialogOption=!1,this.optionIndex=this.levelIndex}}},s={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"wid_size content_bg"},[a("div",{staticClass:"top_bg"}),t._v(" "),a("div",{staticClass:"map_box"},[a("div",{staticClass:"top_info"},[a("div",{staticClass:"bomb fl"},[a("img",{attrs:{src:e("kEkR")}}),t._v(" "),a("b",[t._v(t._s(t.bombNum-t.flagCount))])]),t._v(" "),a("div",[a("img",{attrs:{src:e("7w/L")("./state_"+(0==t.gameState?"1":t.gameState)+".png")}})]),t._v(" "),a("div",{staticClass:"time fr"},[a("b",[t._v(t._s(t.time))]),t._v(" "),a("img",{attrs:{src:e("/e1D")}})])]),t._v(" "),a("div",{class:"tab_out size_"+t.levelIndex},t._l(t.mapHei,function(i,s){return a("div",{key:s,staticClass:"tr"},t._l(t.mapWid,function(i,r){return a("div",{key:r,class:t.arrGame[s][r]>=-4&&t.arrGame[s][r]<=-2?"td handle":"td",on:{click:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?null:"button"in i&&0!==i.button?null:t.handleLeft(s,r)},contextmenu:function(i){return t.handleRight(s,r)}}},[a("img",{attrs:{src:e("FjLB")}}),t._v(" "),t.arrGame[s][r]>0?a("img",{attrs:{src:e("VQsL")("./num_"+t.arrGame[s][r]+".png")}}):t._e(),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:-1==t.arrGame[s][r],expression:"arrGame[i][j] == -1"}],attrs:{src:e("fEGW")}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:-3==t.arrGame[s][r],expression:"arrGame[i][j] == -3"}],attrs:{src:e("yJF/")}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:-4==t.arrGame[s][r],expression:"arrGame[i][j] == -4"}],attrs:{src:e("qwD+")}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:-5==t.arrGame[s][r],expression:"arrGame[i][j] == -5"}],attrs:{src:e("8Swu")}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:-6==t.arrGame[s][r],expression:"arrGame[i][j] == -6"}],attrs:{src:e("SjwN")}}),t._v(" "),a("img",{directives:[{name:"show",rawName:"v-show",value:-7==t.arrGame[s][r],expression:"arrGame[i][j] == -7"}],attrs:{src:e("88iE")}})])}),0)}),0)]),t._v(" "),a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.restartGame}},[t._v("重新开始")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(i){t.dialogOption=!0}}},[t._v("游戏选项")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(i){t.dialogRule=!0}}},[t._v("规则说明")])],1),t._v(" "),a("el-dialog",{attrs:{title:"游戏选项",visible:t.dialogOption,center:"","before-close":t.closeDialogOption},on:{"update:visible":function(i){t.dialogOption=i}}},[a("div",{staticClass:"dialog_option"},t._l(t.levelArr,function(i,e){return a("div",{key:e},[a("el-radio",{attrs:{label:e},model:{value:t.optionIndex,callback:function(i){t.optionIndex=i},expression:"optionIndex"}},[t._v(t._s(i.name)+" （"+t._s(i.bombNum)+"个雷，\n          "+t._s(i.mapWid)+" x "+t._s(i.mapHei)+" 网格）")])],1)}),0),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.setOption}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:t.closeDialogOption}},[t._v("取消")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"规则说明",visible:t.dialogRule,width:"390px",center:""},on:{"update:visible":function(i){t.dialogRule=i}}},[a("div",{staticClass:"dialog_rule"},[a("p",[t._v("1、单击鼠标左键打开方格")]),t._v(" "),a("p",[t._v("数字代表周围一圈8个方格中地雷的数量")]),t._v(" "),a("p",[t._v("2、单击鼠标右键进行标记")]),t._v(" "),a("p",[a("img",{staticClass:"icon",attrs:{src:e("yJF/")}}),t._v("代表标记地雷，"),a("img",{staticClass:"icon",attrs:{src:e("qwD+")}}),t._v("代表无法判断\n      ")]),t._v(" "),a("p",[t._v("\n        4、左上角显示已标记地雷数"),a("img",{attrs:{src:e("kEkR")}})]),t._v(" "),a("p",[t._v("\n        5、右上角显示单局游戏用时"),a("img",{attrs:{src:e("/e1D")}})]),t._v(" "),a("p",[a("img",{staticClass:"state",attrs:{src:e("owMS")}}),t._v("打开所有非雷方格并正确标记所有地雷则游戏胜利\n      ")]),t._v(" "),a("p",[a("img",{staticClass:"state",attrs:{src:e("lm+a")}}),t._v("打开地雷则游戏失败\n      ")])])])],1)},staticRenderFns:[]};var r=e("VU/8")(a,s,!1,function(t){e("dfbM")},"data-v-7b4767a6",null);i.default=r.exports}});