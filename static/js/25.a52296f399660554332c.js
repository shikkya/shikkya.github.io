webpackJsonp([25],{"NzC+":function(e,t){},pmdw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),l=a.n(i),r={data:function(){return{activeName:"new",type_1_index:0,type_2_index:0,formData:{name:"",uPrice:"",nPrice:"",weight:"",unit:"",date:"",place:"",score:0},isSpecialOffer:!1,placeArr:[],curPlace:"",scoreText:["垃圾","正常","满意"],data:[],addData:[],isShowMessage:!1,messageText:""}},created:function(){this.getData()},watch:{type_1_index:function(e){this.type_2_index=0},curPlace:function(e){this.formData.place=-1==e?"":e}},methods:{getData:function(){this.data=this.$store.state.price,this.formData.date=this.getTodayDate();for(var e=0;e<this.data.length;e++)for(var t=0;t<this.data[e].child.length;t++)for(var a=0;a<this.data[e].child[t].child.length;a++)""!=this.data[e].child[t].child[a].place&&-1==this.placeArr.indexOf(this.data[e].child[t].child[a].place)&&this.placeArr.push(this.data[e].child[t].child[a].place);localStorage.removeItem("priceAddData"),this.initLocalStorage()},initLocalStorage:function(){if(localStorage.getItem("priceAddData"))return this.addData=JSON.parse(localStorage.getItem("priceAddData")),!1;this.addData=JSON.parse(l()(this.data));for(var e=0;e<this.addData.length;e++)for(var t=0;t<this.addData[e].child.length;t++)this.addData[e].child[t].child=[];console.log(this.addData),localStorage.setItem("priceAddData",l()(this.addData))},getTodayDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();return a<10&&(a="0"+a),i<10&&(i="0"+i),t+"-"+a+"-"+i},save:function(){if(""==this.formData.uPrice)return this.messageText="请输入价格",this.isShowMessage=!0,!1;if(""==this.formData.unit)return this.messageText="请输入单位",this.isShowMessage=!0,!1;var e=JSON.parse(l()(this.formData));e.uPrice=parseFloat(e.uPrice),e.nPrice=""==e.nPrice?-1:parseFloat(e.nPrice),e.weight=""==e.weight?-1:parseFloat(e.weight),this.addData[this.type_1_index].child.push(e),localStorage.setItem("priceAddData",l()(this.addData))},reset:function(){this.type_1_index=this.type_2_index=0,this.formData={name:"",uPrice:"",nPrice:"",weight:"",unit:"",date:this.getTodayDate(),place:"",score:0},this.isSpecialOffer=!1,this.curPlace=""},copy:function(){},clear:function(){var e=this;this.$confirm("数据清空后不可恢复, 是否清空?","提示",{confirmButtonText:"清空",cancelButtonText:"取消",type:"warning"}).then(function(){localStorage.removeItem("priceAddData"),e.messageText="数据已清空",e.isShowMessage=!0})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"header"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/m/price")}}},[a("i",{staticClass:"el-icon-arrow-left"}),e._v("返回")])],1),e._v(" "),a("div",{staticClass:"content"},[a("el-tabs",{attrs:{stretch:!0},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"新增数据",name:"new"}},[a("el-form",{attrs:{model:e.formData,size:"small","label-width":"55px","label-position":"right"}},[a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type_1_index,callback:function(t){e.type_1_index=t},expression:"type_1_index"}},e._l(e.data,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})}),1),e._v(" "),a("el-select",{staticClass:"fr",attrs:{placeholder:"请选择"},model:{value:e.type_2_index,callback:function(t){e.type_2_index=t},expression:"type_2_index"}},e._l(e.data[e.type_1_index].child,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单价"}},[a("div",{staticClass:"uprice_box"},[e._v("\n              ￥\n              "),a("el-input",{attrs:{placeholder:"价格"},model:{value:e.formData.uPrice,callback:function(t){e.$set(e.formData,"uPrice",t)},expression:"formData.uPrice"}}),e._v("\n              /\n              "),a("el-input",{attrs:{placeholder:"重量"},model:{value:e.formData.weight,callback:function(t){e.$set(e.formData,"weight",t)},expression:"formData.weight"}}),e._v(" "),a("el-input",{staticClass:"fr",attrs:{placeholder:"单位"},model:{value:e.formData.unit,callback:function(t){e.$set(e.formData,"unit",t)},expression:"formData.unit"}})],1),e._v(" "),a("div",{staticClass:"nprice_box"},[a("el-checkbox",{model:{value:e.isSpecialOffer,callback:function(t){e.isSpecialOffer=t},expression:"isSpecialOffer"}},[e._v("是否为特价商品")]),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isSpecialOffer,expression:"isSpecialOffer"}],staticClass:"fr",attrs:{placeholder:"原价"},model:{value:e.formData.nPrice,callback:function(t){e.$set(e.formData,"nPrice",t)},expression:"formData.nPrice"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isSpecialOffer,expression:"isSpecialOffer"}],staticClass:"fr"},[e._v("￥ ")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择日期",editable:!1},model:{value:e.formData.date,callback:function(t){e.$set(e.formData,"date",t)},expression:"formData.date"}})],1),e._v(" "),a("el-form-item",{staticClass:"place_box",attrs:{label:"地点"}},[a("el-select",{model:{value:e.curPlace,callback:function(t){e.curPlace=t},expression:"curPlace"}},[a("el-option",{attrs:{label:"无",value:""}}),e._v(" "),e._l(e.placeArr,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),e._v(" "),a("el-option",{attrs:{label:"+ 新增地点",value:"-1"}})],2),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:-1==e.curPlace,expression:"curPlace == -1"}],attrs:{placeholder:"请输入新增地点名称",clearable:""},model:{value:e.formData.place,callback:function(t){e.$set(e.formData,"place",t)},expression:"formData.place"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评分"}},[a("el-rate",{attrs:{max:3,"show-text":"",texts:e.scoreText},model:{value:e.formData.score,callback:function(t){e.$set(e.formData,"score",t)},expression:"formData.score"}}),e._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"el-icon-delete",size:"mini",circle:""},on:{click:function(t){e.formData.score=0}}})],1)],1),e._v(" "),a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已录数据",name:"record"}},[a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.copy}},[e._v("复制")]),e._v(" "),a("el-button",{on:{click:e.clear}},[e._v("清空")])],1)])],1)],1),e._v(" "),a("my-message",{attrs:{isShow:e.isShowMessage,text:e.messageText},on:{closeMessage:function(t){e.isShowMessage=!1}}})],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(e){a("NzC+")},"data-v-51662bae",null);t.default=c.exports}});