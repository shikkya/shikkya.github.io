webpackJsonp([21],{UnPh:function(t,e){},hTr5:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),o={data:function(){return{tit:"蘑菇爱诗词",poetryId:0,poetryList:[],dataObj:{},ttsObj:{vol:15,spd:1,per:106},ttsPerArr:[{id:0,name:"度小美"},{id:4,name:"度丫丫"},{id:5,name:"度小娇"},{id:103,name:"度米朵"},{id:1,name:"度小宇"},{id:3,name:"度逍遥"},{id:106,name:"度博文"}],dialogVisible:!1,ttsObjBak:null,isShowMessage:!1,messageText:""}},watch:{poetryId:function(t){this.dataObj=this.poetryList[t],window.scrollTo({top:0,behavior:"smooth"})}},created:function(){this.getData(),localStorage.getItem("poetryTtsOption")&&(this.ttsObj=JSON.parse(localStorage.getItem("poetryTtsOption")))},methods:{getData:function(){this.poetryId=parseInt(this.$route.query.poetryId),this.poetryList=JSON.parse(a()(this.$store.state.poetry)),this.dataObj=this.poetryList[this.poetryId]},changePoetryId:function(t){"prev"==t?this.poetryId--:this.poetryId++,this.playAudio("")},playAudio:function(t){"info"==t?(t=this.dataObj.tit+"。作者，"+this.dataObj.author+"。朝代，"+this.dataObj.dynasty+"。",this.dataObj.info.forEach(function(e){t+=e.text})):"translate"==t&&(t="",this.dataObj.info.forEach(function(e,s){t+="第"+(s+1)+"句。"+e.text+"。译文。"+e.translate+"。"})),document.getElementById("ttsDiv").innerHTML='<audio id="ttsAudio" autoplay="autoplay"><source id="ttsSource" src="https://tts.baidu.com/text2audio?cuid=baike&lan=ZH&ctp=1&pdt=301&vol='+this.ttsObj.vol+"&spd="+this.ttsObj.spd+"&per="+this.ttsObj.per+"&tex="+t+'" type="audio/mpeg"></audio>',document.getElementById("ttsAudio").play()},openDialog:function(){this.ttsObjBak=JSON.parse(a()(this.ttsObj)),this.dialogVisible=!0},changeSpd:function(t){"slow"==t?this.ttsObj.spd--:this.ttsObj.spd++,this.playAudio("已为您调整语速")},saveDialog:function(){this.dialogVisible=!1,localStorage.setItem("poetryTtsOption",a()(this.ttsObj)),this.ttsObjBak=null,this.messageText="保存成功",this.isShowMessage=!0},closeDialog:function(){this.dialogVisible=!1,this.ttsObj=JSON.parse(a()(this.ttsObjBak)),this.ttsObjBak=null}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"header"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/m/poetry")}}},[s("i",{staticClass:"el-icon-arrow-left"}),t._v("返回列表")]),t._v(" "),s("el-button",{staticClass:"fr set_btn",attrs:{type:"primary"},on:{click:t.openDialog}},[t._v("语音设置")])],1),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"info"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",circle:""},on:{click:function(e){return t.playAudio("info")}}}),t._v(" "),s("h3",[t._v(t._s(t.dataObj.tit))]),t._v(" "),s("h4",[t._v(t._s(t.dataObj.author)+"（"+t._s(t.dataObj.dynasty)+"）")]),t._v(" "),t._l(t.dataObj.info,function(e,i){return s("p",{key:i,class:{center:0==t.dataObj.flag}},[t._v("\n        "+t._s(e.text)+"\n      ")])})],2),t._v(" "),""!=t.dataObj.intro?s("div",{staticClass:"intro"},[t._v("\n      【说明】\n      "),s("p",[t._v(t._s(t.dataObj.intro))])]):t._e(),t._v(" "),""!=t.dataObj.info[0].translate?s("div",{staticClass:"translate"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",circle:""},on:{click:function(e){return t.playAudio("translate")}}}),t._v("\n      【译文】\n      "),t._l(t.dataObj.info,function(e,i){return s("div",{key:i},[s("p",{staticClass:"text"},[t._v(t._s(e.text))]),t._v(" "),s("p",[t._v(t._s(e.translate))])])})],2):t._e()]),t._v(" "),s("div",{staticClass:"footer"},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.poetryId>0,expression:"poetryId > 0"}],staticClass:"prev_btn",attrs:{type:"primary"},on:{click:function(e){return t.changePoetryId("prev")}}},[t._v("上一首")]),t._v(" "),s("span",[t._v("第 "+t._s(t.poetryId+1)+" 首")]),t._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.poetryId<t.poetryList.length-1,expression:"poetryId < poetryList.length - 1"}],staticClass:"next_btn",attrs:{type:"primary"},on:{click:function(e){return t.changePoetryId("next")}}},[t._v("下一首")])],1),t._v(" "),s("el-dialog",{attrs:{title:"语音设置",visible:t.dialogVisible,width:"90%","before-close":t.closeDialog},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"dialog_content"},[s("div",{staticClass:"dialog_tit"},[t._v("\n        当前语速为"),s("font",[t._v(t._s(t.ttsObj.spd))])],1),t._v(" "),s("el-button",{attrs:{type:0==t.ttsObj.spd?"info":"primary",disabled:0==t.ttsObj.spd},on:{click:function(e){return t.changeSpd("slow")}}},[t._v("慢一点")]),t._v(" "),s("el-button",{attrs:{type:15==t.ttsObj.spd?"info":"primary",disabled:15==t.ttsObj.spd},on:{click:function(e){return t.changeSpd("fast")}}},[t._v("快一点")]),t._v(" "),s("div",{staticClass:"dialog_tit"},[t._v("请选择音色：")]),t._v(" "),t._l(t.ttsPerArr,function(e){return s("el-radio",{key:e.id,attrs:{label:e.id},on:{change:function(s){return t.playAudio("我是"+e.name+",很高兴为您服务。")}},model:{value:t.ttsObj.per,callback:function(e){t.$set(t.ttsObj,"per",e)},expression:"ttsObj.per"}},[t._v(t._s(e.name))])})],2),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"dialog_footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.saveDialog}},[t._v("保存")]),t._v(" "),s("el-button",{on:{click:t.closeDialog}},[t._v("取消")])],1)])]),t._v(" "),s("div",{attrs:{id:"ttsDiv"}}),t._v(" "),s("my-message",{attrs:{isShow:t.isShowMessage,text:t.messageText},on:{closeMessage:function(e){t.isShowMessage=!1}}})],1)},staticRenderFns:[]};var r=s("VU/8")(o,n,!1,function(t){s("UnPh")},"data-v-5bded9e4",null);e.default=r.exports}});